# JS - 프로미스-1

# 1. 프로미스란?

- 자바스크립트는 비동기 처리를 위한 하나의 패턴으로 콜백 함수를 사용함.
- ES6에서는 비동기 처리를 위한 도 다른 패턴으로 프로미스(Promise)를 도입했음.
- 프로미스는 전통적인 콜백 패턴이 가진 단점을 보완하며 비동기 처리 시점을 명확하게 표현할 수 있다는 장점이 있음.

# 2. 콜백 패턴의 단점

## 2.1 콜백 헬

- 자바스크립트에서 사용되는 비동기식 처리 모델은 요청을 병렬로 처리하여 다른 요청이 블로킹되지 않는 장점이 있음.
- 비동기 처리를 위해 콜백 패턴을 사용하면 처리 순서를 보장하기 위해 여러 개의 콜백 함수가 네스팅되어 복잡도가 높아지는 콜백 헬이 발생하는 단점이 있음.

### 콜백 헬이 발생하는 이유

- 비동기 함수 내에서 처리 결과를 반환하면 기대한 대로 동작하지 않음.
- 비동기 함수의 처리 결과에 대한 처리는 비동기 함수의 콜백 함수 내에서 처리해야 함. 이로 인해 콜백 헬이 발생함.

## 2.2 에러 처리의 한계

- 콜백 방식의 비동기 처리가 갖는 문제점 중에서 가장 심각한 것은 에러 처리가 곤란하다는 것임.

# 3. 프로미스의 생성

- 프로미스는 Promise 생성자 함수를 통해 인스턴스화함.
- Promise 생성자 함수는 비동기 작업을 수행할 콜백 함수를 인자로 전달받는데 이 콜백 함수는 resole와 reject 함수를 인자로 전달받음.

```jsx
// Promise 객체의 생성
const promise = new Promise((resolve, reject) => {
  // 비동기 작업을 수행함.

  if (/* 비동기 작업 수행 성공 */) {
    resolve('result');
  }
  else { /* 비동기 작업 수행 실패 */
    reject('failure reason');
  }
});
```

- Promise는 비동기 처리가 성공(fulfilled)하였는지 또는 실패(rejected)하였는지 등의 상태 정보를 갖음.

| 상태      | 의미                                       | 구현                                               |
| --------- | ------------------------------------------ | -------------------------------------------------- |
| pending   | 비동기 처리가 아직 수행되지 않은 상태      | resolve 또는 reject 함수가 아직 호출되지 않은 상태 |
| fulfilled | 비동기 처리가 수행된 상태 (성공)           | resolve 함수가 호출된 상태                         |
| rejected  | 비동기 처리가 수행된 상태 (실패)           | reject 함수가 호출된 상태                          |
| settled   | 비동기 처리가 수행된 상태 (성공 또는 실패) | resolve 또는 reject 함수가 호출된 상태             |

- Promise 생성자 함수가 인자로 전달받은 콜백 함수는 내부에서 비동기 처리 작업을 수행함.
- 비동기 처리가 성공하면 resolve 함수를 호출하고, 실패하면 reject 함수를 호출함. (프로미스는 ‘fulfilled’ 상태)  (프로미스는 ‘rejected’ 상태)

## 참고 자료

- https://poiemaweb.com/es6-promise